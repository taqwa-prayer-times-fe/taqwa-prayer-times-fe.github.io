(this["webpackJsonptaqwa-prayer"]=this["webpackJsonptaqwa-prayer"]||[]).push([[1],{123:function(e,t,a){},124:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(18),l=a(3),c=a(0),i=a.n(c),m=a(104),u=a.n(m),o=a(1),s=a.n(o),d=a(25),f=a(23),h=a(30),b=a(16),p=a(11),E=a(5),g=(a(123),Object(h.b)("signin")((function(e){var t=e.signin,a=e.meta,m=Object(c.useState)({uname:"",pwd:""}),u=Object(l.a)(m,2),o=u[0],s=u[1],f=Object(c.useState)(null),h=Object(l.a)(f,2),b=h[0],p=h[1],E=Object(c.useState)(!1),g=Object(l.a)(E,2),j=g[0],O=g[1],v=function(e){s(Object(r.a)(Object(r.a)({},o),{},Object(n.a)({},e.target.name,e.target.value)))};return i.a.createElement("div",null,i.a.createElement("form",{className:"login-form"},i.a.createElement("h1",null,"Login"),b&&i.a.createElement("div",{className:"login-form__error"},b),j&&i.a.createElement(d.a,null),i.a.createElement("input",{type:"text",name:"uname",className:"login-form__input-item",placeholder:"Username",value:o.uname,onChange:v}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("input",{type:"password",name:"pwd",className:"login-form__input-item",placeholder:"Password",value:o.pwd,onChange:v}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",className:"login-form__input-button",value:"Sign in",onClick:function(e){e.preventDefault(),O(!0),t("taqwa-prayer-".concat(o.uname,"@amrayn.com"),o.pwd).catch((function(e){O(!1),p("Unable to login, please check the username/password before trying again.")}))}})),a&&i.a.createElement("div",{className:"login-form__footer"},"If you do not have the credentials, please contact brothers on ",a.EMAIL," or ",a.PHONE))}))),j=(a(124),function(e){return i.a.createElement("input",{required:!0,type:"time",value:e.time,name:e.name,className:"t",onChange:e.handler})});t.default=Object(h.b)("currentUser","signout","statusPending")((function(e){var t=Object(c.useState)({}),a=Object(l.a)(t,2),m=a[0],o=a[1],h=Object(c.useState)(!0),O=Object(l.a)(h,2),v=O[0],y=O[1],N=Object(c.useState)(null),S=Object(l.a)(N,2),D=S[0],T=S[1],w=Object(c.useState)(null),Y=Object(l.a)(w,2),_=Y[0],M=Y[1],P=Object(c.useState)(null),I=Object(l.a)(P,2),C=I[0],k=I[1],U=Object(c.useState)(null),q=Object(l.a)(U,2),x=q[0],A=q[1],J=Object(c.useState)(null),V=Object(l.a)(J,2),B=V[0],L=V[1],R=Object(p.a)("dev",0,-1);Object(c.useEffect)((function(){localStorage.setItem("cache-breaker5",Math.random()),Number(R)&&console.log("Development mode")}),[R]),Object(c.useEffect)((function(){if(e.ready){var t=s()(e.upcomingTimes.effective,E.e);t.startOf("day").isBefore(s()().startOf("day"))&&(t=s()().startOf("day"));var a={times:{fajr:Object(b.d)(e.upcomingTimes.fajr),dhuhr:Object(b.d)(e.upcomingTimes.dhuhr),asr:Object(b.d)(e.upcomingTimes.asr),ishaa:Object(b.d)(e.upcomingTimes.ishaa),jumuah:Object(b.d)(e.upcomingTimes.jumuah)},upcomingEffectiveDate:t.format("YYYY-MM-DD")};o({fajr:a.times.fajr,dhuhr:a.times.dhuhr,asr:a.times.asr,ishaa:a.times.ishaa,jumuah:a.times.jumuah}),k(a.upcomingEffectiveDate),A(s()().startOf("day").format("YYYY-MM-DD")),L(s()().startOf("day").add(7,"day").format("YYYY-MM-DD")),y(!1)}}),[e.ready,e.upcomingTimes]);var F=function(e,t,a){return console.debug("post to endpoint %s - data\n%s",e,a),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()}))},z=function(e){e.preventDefault(),o(Object(r.a)(Object(r.a)({},m),{},Object(n.a)({},e.target.name,e.target.value)))};return R?i.a.createElement(u.a,{id:"pa-edit",className:"pa-edit",meta:{title:"Edit Prayer Times",viewport:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}},(!e.currentUser&&e.statusPending||v)&&i.a.createElement(d.a,null),!e.currentUser&&!e.statusPending&&i.a.createElement(g,e),e.currentUser&&!e.statusPending&&i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Edit Iqaamah Times"),v&&i.a.createElement("div",{className:"pending"},"Loading..."),D&&i.a.createElement("div",{className:"error"},D),_&&i.a.createElement("div",{className:"message"},_),i.a.createElement("form",{onSubmit:function(t){t.preventDefault(),y(!0);var a="SAVE_ENDPOINT_UPCOMING",n="SAVE_ENDPOINT_CURR";Number(R)&&(console.log("Dev mode ..."),a="".concat(a,"_DEV"),n="".concat(n,"_DEV"));var l=f.a[a],c=f.a[n],i=s()().startOf("day"),u=s()(e.upcomingTimes.effective,E.e);e.currentUser.getIdToken(!0).then((function(t){var a=[];u.isSameOrBefore(i)?(console.log("Replacing current times with upcoming..."),a.push(F(c,t,JSON.stringify({fajr:Object(b.d)(e.upcomingTimes.fajr),dhuhr:Object(b.d)(e.upcomingTimes.dhuhr),asr:Object(b.d)(e.upcomingTimes.asr),ishaa:Object(b.d)(e.upcomingTimes.ishaa),jumuah:Object(b.d)(e.upcomingTimes.jumuah),effective:s()().startOf("day").format(E.e)})))):console.log("Ignoring replacing current times",u.format("YYYY-MM-DD"),i.format("YYYY-MM-DD")),console.log("Setting upcoming times ..."),a.push(F(l,t,JSON.stringify(Object(r.a)(Object(r.a)({},m),{},{effective:C})))),Promise.all(a).then((function(e){y(!1);var t=e.map((function(e){return e.error})).filter((function(e){return e})).join(" \u2022 ");t.length>0?T(t):(localStorage.setItem("cache-breaker5",Math.random()),M("Successfully updated!"))})).catch((function(e){console.error(e),T("Unexpected error occurred")}))}))}},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Fajr"),i.a.createElement("td",null,i.a.createElement(j,{name:"fajr",time:m.fajr,handler:z}))),i.a.createElement("tr",null,i.a.createElement("td",null,"Dhuhr"),i.a.createElement("td",null,i.a.createElement(j,{name:"dhuhr",time:m.dhuhr,handler:z}))),i.a.createElement("tr",null,i.a.createElement("td",null,"Asr"),i.a.createElement("td",null,i.a.createElement(j,{name:"asr",time:m.asr,handler:z}))),i.a.createElement("tr",null,i.a.createElement("td",null,"Ishaa"),i.a.createElement("td",null,i.a.createElement(j,{name:"ishaa",time:m.ishaa,handler:z}))),i.a.createElement("tr",null,i.a.createElement("td",null,"Jumuah"),i.a.createElement("td",null,i.a.createElement(j,{name:"jumuah",time:m.jumuah,handler:z}))),i.a.createElement("tr",null),i.a.createElement("tr",null,i.a.createElement("td",null,"Effective from"),i.a.createElement("td",null,i.a.createElement("input",{type:"date",id:"effective",name:"effective",className:"t",value:C,min:x,max:B,required:!0,onChange:function(e){k(e.target.value)}}))),i.a.createElement("tr",{className:"button-container"},i.a.createElement("td",{colSpan:"2"},i.a.createElement("input",{type:"submit",className:"button",value:"Save",disabled:v}))),i.a.createElement("tr",{className:"button-container"},i.a.createElement("td",{colSpan:"2"},i.a.createElement("input",{type:"button",className:"button",value:"Cancel",onClick:function(e){e.preventDefault(),window.location="/"}}))),i.a.createElement("tr",{className:"button-container"},i.a.createElement("td",{colSpan:"2"},i.a.createElement("input",{type:"button",className:"button",value:"Sign Out",onClick:function(t){t.preventDefault(),e.signout()}})))))),i.a.createElement("div",{className:"note"},"Maghrib iqaamah time is 10 (+",E.f," min offset) minutes after adhaan"))):i.a.createElement("div",null,"Edit is not available at this time. Please contact developer @ 0433456066 to change the time.",i.a.createElement("br",null),i.a.createElement("br",null),"This is temporary as I am working on getting this fixed, in shaa Allah, it should be fixed in a day or two.")}))}}]);