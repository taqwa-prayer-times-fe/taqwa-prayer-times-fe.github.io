(this["webpackJsonptaqwa-prayer"]=this["webpackJsonptaqwa-prayer"]||[]).push([[1],{159:function(e,t,a){},160:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(28),r=a(19),c=a(15),l=a.n(c),u=a(18),m=a(1),i=a(0),o=a.n(i),s=a(140),d=a.n(s),f=a(2),p=a.n(f),b=a(27),h=a(13),E=a(32),O=a(16),g=a(11),j=a(5),v=(a(159),Object(E.b)("signin","authError")((function(e){var t=e.signin,a=e.authError,c=e.meta,l=Object(i.useState)({uname:"",pwd:""}),u=Object(m.a)(l,2),s=u[0],d=u[1],f=Object(i.useState)(a),p=Object(m.a)(f,1)[0],h=Object(i.useState)(!1),E=Object(m.a)(h,2),O=E[0],g=E[1],j=function(e){d(Object(r.a)(Object(r.a)({},s),{},Object(n.a)({},e.target.name,e.target.value)))};return o.a.createElement("div",null,o.a.createElement("form",{className:"login-form"},o.a.createElement("h1",null,"Login"),p&&o.a.createElement("div",{className:"login-form__error"},p),O&&o.a.createElement(b.a,null),o.a.createElement("input",{type:"text",name:"uname",className:"login-form__input-item",placeholder:"Username",value:s.uname,onChange:j}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{type:"password",name:"pwd",className:"login-form__input-item",placeholder:"Password",value:s.pwd,onChange:j}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{type:"submit",className:"login-form__input-button",value:"Sign in",onClick:function(e){e.preventDefault(),g(!0),t(s.uname,s.pwd).catch((function(e){g(!1)}))}})),c&&o.a.createElement("div",{className:"login-form__footer"},"If you do not have the credentials, please contact brothers on ",c.email," or ",c.phone))}))),y=(a(160),function(e){return o.a.createElement("input",{required:!0,type:"time",value:e.time,name:e.name,className:"t",onChange:e.handler})});t.default=Object(E.b)("currentToken","signout","statusPending")((function(e){var t=Object(i.useState)({}),a=Object(m.a)(t,2),c=a[0],s=a[1],f=Object(i.useState)(!0),E=Object(m.a)(f,2),S=E[0],N=E[1],k=Object(i.useState)(null),x=Object(m.a)(k,2),w=x[0],T=x[1],D=Object(i.useState)(null),_=Object(m.a)(D,2),C=_[0],Y=_[1],M=Object(i.useState)(null),P=Object(m.a)(M,2),I=P[0],U=P[1],q=Object(i.useState)(null),J=Object(m.a)(q,2),A=J[0],V=J[1],B=Object(i.useState)(null),F=Object(m.a)(B,2),L=F[0],R=F[1],z=Object(i.useState)(!1),G=Object(m.a)(z,2),H=G[0],K=G[1],Q=Object(g.a)("dev",0,-1);Object(i.useEffect)((function(){localStorage.setItem("_cbrk",Math.random()),Number(Q)&&console.log("Dev mode")}),[Q]),Object(i.useEffect)((function(){if(e.ready){var t=p()(e.upcomingTimes.effective,j.e);t.startOf("day").isBefore(p()().startOf("day"))&&(t=p()().startOf("day"));var a={times:{fajr:Object(O.d)(e.upcomingTimes.fajr),dhuhr:Object(O.d)(e.upcomingTimes.dhuhr),asr:Object(O.d)(e.upcomingTimes.asr),ishaa:Object(O.d)(e.upcomingTimes.ishaa),jumuah:Object(O.d)(e.upcomingTimes.jumuah)},upcomingEffectiveDate:t.format("YYYY-MM-DD")};s({fajr:a.times.fajr,dhuhr:a.times.dhuhr,asr:a.times.asr,ishaa:a.times.ishaa,jumuah:a.times.jumuah}),U(a.upcomingEffectiveDate),V(p()().startOf("day").format("YYYY-MM-DD")),R(p()().startOf("day").add(7,"day").format("YYYY-MM-DD")),N(!1)}}),[e.ready,e.upcomingTimes]);var W=function(t,a){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.currentToken},body:a}).then((function(e){return e.json()})).catch((function(e){T("Unexpected error "+e)}))},X=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,m,i,o,s,d,f,b,E,O;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),N(!0),n="SAVE_ENDPOINT_UPCOMING",m="SAVE_ENDPOINT_CURR",Number(Q)&&(console.log("Dev mode ..."),n="".concat(n,"_DEV"),m="".concat(m,"_DEV")),i=h.a[n],o=h.a[m],s=p()().startOf("day"),d=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.error?T(t.error):Y("Successfully updated!"),setTimeout((function(){localStorage.setItem("_cbrk","upd-"+Math.random())}),1e4),N(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!p()(I,j.e).isSameOrBefore(s)){t.next=27;break}return t.prev=11,t.next=14,W(o,JSON.stringify(Object(r.a)(Object(r.a)({},c),{},{effective:p()().startOf("day").format(j.e)})));case 14:return f=t.sent,t.next=17,d(f);case 17:t.next=25;break;case 19:return t.prev=19,t.t0=t.catch(11),N(!1),console.error(t.t0),T("Unexpected error occurred (curr)"),t.abrupt("return");case 25:t.next=44;break;case 27:if(console.debug("Swapping timings ..."),!(b=p()(e.upcomingTimes.effective,j.e)).startOf("day").isSameOrBefore(s)){t.next=44;break}return t.prev=30,t.next=33,W(o,JSON.stringify(Object(r.a)(Object(r.a)({},e.upcomingTimes),{},{effective:b.format(j.e)})));case 33:return E=t.sent,t.next=36,d(E);case 36:t.next=44;break;case 38:return t.prev=38,t.t1=t.catch(30),N(!1),console.error(t.t1),T("Unexpected error occurred (curr)"),t.abrupt("return");case 44:if(!H){t.next=47;break}return console.log("Ignoring future times"),t.abrupt("return");case 47:return t.prev=47,t.next=50,W(i,JSON.stringify(Object(r.a)(Object(r.a)({},c),{},{effective:I})));case 50:return O=t.sent,t.next=53,d(O);case 53:t.next=61;break;case 55:return t.prev=55,t.t2=t.catch(47),N(!1),console.error(t.t2),T("Unexpected error occurred (upc)"),t.abrupt("return");case 61:case"end":return t.stop()}}),t,null,[[11,19],[30,38],[47,55]])})));return function(e){return t.apply(this,arguments)}}(),Z=function(e){e.preventDefault(),s(Object(r.a)(Object(r.a)({},c),{},Object(n.a)({},e.target.name,e.target.value)))};return o.a.createElement(d.a,{id:"pa-edit",className:"pa-edit",meta:{title:"Edit Prayer Times",viewport:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}},(!e.currentToken&&e.statusPending||S)&&o.a.createElement(b.a,null),!e.currentToken&&!e.statusPending&&o.a.createElement(v,e),e.currentToken&&!e.statusPending&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Edit Iqaamah Times"),S&&o.a.createElement("div",{className:"pending"},"Loading..."),w&&o.a.createElement("div",{className:"error"},w),C&&o.a.createElement("div",{className:"message"},C),o.a.createElement("form",{onSubmit:X},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Fajr"),o.a.createElement("td",null,o.a.createElement(y,{name:"fajr",time:c.fajr,handler:Z}))),o.a.createElement("tr",null,o.a.createElement("td",null,"Dhuhr"),o.a.createElement("td",null,o.a.createElement(y,{name:"dhuhr",time:c.dhuhr,handler:Z}))),o.a.createElement("tr",null,o.a.createElement("td",null,"Asr"),o.a.createElement("td",null,o.a.createElement(y,{name:"asr",time:c.asr,handler:Z}))),o.a.createElement("tr",null,o.a.createElement("td",null,"Ishaa"),o.a.createElement("td",null,o.a.createElement(y,{name:"ishaa",time:c.ishaa,handler:Z}))),o.a.createElement("tr",null,o.a.createElement("td",null,"Jumuah"),o.a.createElement("td",null,o.a.createElement(y,{name:"jumuah",time:c.jumuah,handler:Z}))),o.a.createElement("tr",null),o.a.createElement("tr",null,o.a.createElement("td",null,"Effective from"),o.a.createElement("td",null,o.a.createElement("input",{type:"date",id:"effective",name:"effective",className:"t",value:I,min:A,max:L,required:!0,onChange:function(e){U(e.target.value)}}))),o.a.createElement("tr",null,o.a.createElement("td",{colSpan:2,style:{textAlign:"center"}},o.a.createElement("input",{type:"checkbox",id:"update-only-current",onChange:function(e){K(e.target.checked)},checked:H}),o.a.createElement("label",{htmlFor:"update-only-current"},"Update only current times"))),o.a.createElement("tr",{className:"button-container"},o.a.createElement("td",{colSpan:"2"},o.a.createElement("input",{type:"submit",className:"button",value:"Save",disabled:S}))),o.a.createElement("tr",{className:"button-container"},o.a.createElement("td",{colSpan:"2"},o.a.createElement("input",{type:"button",className:"button",value:"Cancel",onClick:function(e){e.preventDefault(),window.location="/"}}))),o.a.createElement("tr",{className:"button-container"},o.a.createElement("td",{colSpan:"2"},o.a.createElement("input",{type:"button",className:"button",value:"Sign Out",onClick:function(t){t.preventDefault(),e.signout()}})))))),o.a.createElement("div",{className:"note"},"Maghrib iqaamah time is 10 (+",e.cfg.maghrib_offset," mins offset) minutes after adhaan. Login to ",o.a.createElement("a",{href:"https://wetsand.amrayn.com"},"wetsand console")," to change this.")))}))}}]);